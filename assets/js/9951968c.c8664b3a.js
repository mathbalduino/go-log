"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[161],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return g}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(t),g=a,m=d["".concat(s,".").concat(g)]||d[g]||u[g]||o;return t?r.createElement(m,i(i({ref:n},p),{},{components:t})):r.createElement(m,i({ref:n},p))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9087:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var r=t(7462),a=t(3366),o=(t(7294),t(3905)),i=["components"],l={sidebar_position:12},s="Configuration",c={unversionedId:"basic-concepts/configuration",id:"basic-concepts/configuration",isDocsHomePage:!1,title:"Configuration",description:"You can customize Logger instances using the Configuration struct:",source:"@site/docs/basic-concepts/configuration.md",sourceDirName:"basic-concepts",slug:"/basic-concepts/configuration",permalink:"/go-log/docs/basic-concepts/configuration",editUrl:"https://github.com/mathbalduino/go-log/edit/docs/docs/basic-concepts/configuration.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{sidebar_position:12},sidebar:"tutorialSidebar",previous:{title:"Logger creation",permalink:"/go-log/docs/basic-concepts/logger_creation"},next:{title:"Loggers clonage",permalink:"/go-log/docs/advanced/loggers_clonage"}},p=[{value:"LvlsEnabled usage",id:"lvlsenabled-usage",children:[]},{value:"Default configuration",id:"default-configuration",children:[]}],u={toc:p};function d(e){var n=e.components,t=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"You can customize ",(0,o.kt)("inlineCode",{parentName:"p"},"Logger")," instances using the ",(0,o.kt)("inlineCode",{parentName:"p"},"Configuration")," struct:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},"// configuration.go\ntype Configuration struct {\n    AsyncScheduler AsyncScheduler\n    LvlFieldName   string\n    MsgFieldName   string\n    LvlsEnabled    uint64\n    ErrorParser    func(error) (string, LogFields)\n}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/go-log/docs/basic-concepts/async_logger#asyncscheduler"},"AsyncScheduler"),": If nil, the Logger will be set to ",(0,o.kt)("inlineCode",{parentName:"li"},"sync"),". If not nil, the ",(0,o.kt)("inlineCode",{parentName:"li"},"Logger")," will be ",(0,o.kt)("a",{parentName:"li",href:"/go-log/docs/basic-concepts/async_logger"},"async")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"LvlFieldName"),": The ",(0,o.kt)("inlineCode",{parentName:"li"},"lvl")," field is always required to be present. This configuration is used to control the ",(0,o.kt)("inlineCode",{parentName:"li"},"key")," that represents the ",(0,o.kt)("inlineCode",{parentName:"li"},"level")," of the log inside the ",(0,o.kt)("inlineCode",{parentName:"li"},"LogFields"),". ",(0,o.kt)("strong",{parentName:"li"},"If it's equal to the ",(0,o.kt)("inlineCode",{parentName:"strong"},"MsgFieldName"),", an ",(0,o.kt)("inlineCode",{parentName:"strong"},"error")," will be thrown")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"MsgFieldName"),": The ",(0,o.kt)("inlineCode",{parentName:"li"},"msg")," field is always required to be present. This configuration is used to control the ",(0,o.kt)("inlineCode",{parentName:"li"},"key")," that represents the ",(0,o.kt)("inlineCode",{parentName:"li"},"message")," of the log inside the ",(0,o.kt)("inlineCode",{parentName:"li"},"LogFields"),". ",(0,o.kt)("strong",{parentName:"li"},"If it's equal to the ",(0,o.kt)("inlineCode",{parentName:"strong"},"LvlFieldName"),", an ",(0,o.kt)("inlineCode",{parentName:"strong"},"error")," will be thrown")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"LvlsEnabled"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"uint64")," used to check the created logs to see if they're enabled. The log levels are expected to be used as integer flags, using values that are equal to the power of two: 2^0 (1), 2^1 (2), 2^2 (4), 2^3 (8), ..."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/go-log/docs/basic-concepts/log_levels#errorparser"},"ErrorParser"),": function used to extract information from the errors given to ",(0,o.kt)("inlineCode",{parentName:"li"},"ErrorFrom")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"FatalFrom")," methods. ",(0,o.kt)("strong",{parentName:"li"},"If it's nil, an ",(0,o.kt)("inlineCode",{parentName:"strong"},"error")," will be thrown"))),(0,o.kt)("p",null,"You can set the ",(0,o.kt)("inlineCode",{parentName:"p"},"Logger")," configuration using the ",(0,o.kt)("inlineCode",{parentName:"p"},"Configuration")," method. Note that when you call this method from any ",(0,o.kt)("inlineCode",{parentName:"p"},"Logger")," instance, all the ",(0,o.kt)("inlineCode",{parentName:"p"},"Loggers")," that were created before it will point to the new ",(0,o.kt)("inlineCode",{parentName:"p"},"Configuration"),"."),(0,o.kt)("h2",{id:"lvlsenabled-usage"},"LvlsEnabled usage"),(0,o.kt)("p",null,"For every created log, the log ",(0,o.kt)("inlineCode",{parentName:"p"},"level")," and the ",(0,o.kt)("inlineCode",{parentName:"p"},"Configuration.LvlsEnabled")," will be compared using the bitwise ",(0,o.kt)("inlineCode",{parentName:"p"},"and")," operator. If the result of the operation is ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),", the log is allowed to continue it's life cycle. If ",(0,o.kt)("inlineCode",{parentName:"p"},"false"),", the log is not created and nothing happens (",(0,o.kt)("inlineCode",{parentName:"p"},"noop"),")."),(0,o.kt)("p",null,"This is the real function that checks to see if the log ",(0,o.kt)("inlineCode",{parentName:"p"},"level")," is enabled:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},"// util.go\n// Real production code\nfunc notEnabled(flags uint64, logLvl uint64) bool {\n    return (flags & logLvl) == 0\n}\n")),(0,o.kt)("p",null,"The library comes with some builtin constant values, that can be used to calculate new values, for example, or be used to configure the ",(0,o.kt)("inlineCode",{parentName:"p"},"Logger")," in a different way:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},"// logLevels.go\nconst (\n    LvlTrace uint64 = 1 << iota\n    LvlDebug\n    LvlInfo\n    LvlWarn\n    LvlError\n    LvlFatal\n)\nconst (\n    LvlProduction = LvlInfo | LvlWarn | LvlError | LvlFatal\n    LvlDefaults = LvlDebug | LvlProduction\n    LvlAll = LvlTrace | LvlDefaults\n)\n")),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If you need to convert the log level ",(0,o.kt)("inlineCode",{parentName:"p"},"uint64")," to some string representation, you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"LvlToString")," function, exported by the root package."))),(0,o.kt)("h2",{id:"default-configuration"},"Default configuration"),(0,o.kt)("p",null,"The library comes with a builtin ",(0,o.kt)("inlineCode",{parentName:"p"},"Default Configuration"),", accessible by calling the ",(0,o.kt)("inlineCode",{parentName:"p"},"DefaultConfig()")," root package function, that will handle the most basic scenarios:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},'// configuration.go\nfunc DefaultConfig() Configuration {\n    return Configuration{\n        AsyncScheduler: nil,\n        LvlFieldName: "lvl",\n        MsgFieldName: "msg",\n        LvlsEnabled:  LvlDefaults,\n        ErrorParser:  DefaultErrorParser,\n  }\n}\n')),(0,o.kt)("p",null,"This configuration will set the ",(0,o.kt)("inlineCode",{parentName:"p"},"Logger")," to be ",(0,o.kt)("inlineCode",{parentName:"p"},"sync")," (nil ",(0,o.kt)("inlineCode",{parentName:"p"},"AsyncScheduler"),"), use the default values for the ",(0,o.kt)("inlineCode",{parentName:"p"},"level")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"message")," required fields, disable only the ",(0,o.kt)("inlineCode",{parentName:"p"},"Trace")," log levels and use the ",(0,o.kt)("a",{parentName:"p",href:"/go-log/docs/basic-concepts/log_levels#default-errorparser"},"DefaultErrorParser")," to extract the errors given to the ",(0,o.kt)("inlineCode",{parentName:"p"},"ErrorFrom")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"FatalFrom")," methods."),(0,o.kt)("p",null,"It is, in fact, the configuration used to create ",(0,o.kt)("a",{parentName:"p",href:"/go-log/docs/basic-concepts/logger_creation"},"Default Loggers"),"."))}d.isMDXComponent=!0}}]);